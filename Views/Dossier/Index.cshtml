@using linc.Utility
@using linc.Models.Enumerations
@model DossierIndexViewModel

@{
    ViewData["Title"] = HtmlLocalizer["Dossier_IndexPage_Title"];
}

@section Breadcrumbs {
    <!-- ======= Breadcrumbs ======= -->
    <section class="breadcrumbs">
        <div class="container">

            <div class="d-flex justify-content-between align-items-center">
                <h2>@ViewData["Title"]</h2>
                <ol>
                    <li>
                        <a href="/">@HtmlLocalizer["NavItem_Home"]</a>
                    </li>
                    <li>@HtmlLocalizer["Dossier_List_Label"]</li>
                </ol>
            </div>

        </div>
    </section>
    <!-- End Breadcrumbs -->
}

<section>
    <div class="container">

        <h3>@HtmlLocalizer["Dossier_IndexPage_SubTitle"]</h3>

        @if (User.IsAtLeast(SiteRole.HeadEditor))
        {
            <p class="text-end">
                <a asp-action="Create">@HtmlLocalizer["Create_Label"]</a>
            </p>
        }
        
        <hr />
        
        @if (Model.Records.Any())
        {
            <table class="table table-striped">
                <thead>
                <tr>
                    <th sortable-for="Status">
                        Status
                    </th>
                    <th sortable-for="Title">
                        Title
                    </th>
                </tr>
                </thead>
                <tbody>
                @foreach (var item in Model.Records)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Status)
                        </td>
                        <td>
                            <a asp-action="Details" asp-route-id="@item.Id">
                                @Html.DisplayFor(modelItem => item.Title)
                            </a>
                            <p>
                                <small>
                                    @Html.DisplayFor(modelItem => item.FirstName) @Html.DisplayFor(modelItem => item.LastName)
                                </small>
                            </p>
                        </td>
                    </tr>
                }
                </tbody>
            </table>
        }
        else
        {
            <p>
                @HtmlLocalizer["Dossiers_IndexPage_NoResults"]
            </p>
        }

        @if (Model.TotalPages > 1)
        {
            @await Html.PartialAsync("_Paging", Model)
        }
    </div>
</section>

@section Newsletter {
    <partial name="_ReportBug" />
}